<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Labirinto 3D Modular</title>
    <link rel="shortcut icon" href="#">
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; font-family: 'Courier New', Courier, monospace; user-select: none; }
        
        /* UI Layers */
        #ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        
        /* Minimapa */
        #minimap-container {
            position: absolute; top: 20px; left: 20px;
            border: 2px solid #444; background: #000;
            width: 150px; height: 150px; opacity: 0.8;
        }
        #minimap-canvas { width: 100%; height: 100%; display: block; }

        /* Stamina */
        #stamina-container {
            position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%);
            width: 300px; height: 10px; border: 2px solid #333; background: #111; border-radius: 5px;
        }
        #stamina-bar {
            width: 100%; height: 100%; background: #00aaff; box-shadow: 0 0 10px #00aaff;
            transition: width 0.1s linear;
        }

        /* Invent√°rio */
        #inventory-container {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 10px; pointer-events: auto;
        }
        .inv-slot {
            width: 40px; height: 40px; border: 2px solid #555; background: rgba(0,0,0,0.6);
            color: #fff; display: flex; justify-content: center; align-items: center;
            font-size: 12px; font-weight: bold; position: relative;
        }
        .inv-slot.has-item { border-color: #00aaff; box-shadow: 0 0 5px #00aaff; background: rgba(0, 100, 255, 0.2); }
        .inv-key { position: absolute; top: -15px; left: 0; width: 100%; text-align: center; color: #888; font-size: 10px; }

        /* Intera√ß√£o */
        #interaction-msg {
            position: absolute; top: 60%; left: 50%; transform: translate(-50%, -50%);
            color: #fff; text-shadow: 0 0 5px #000; font-size: 16px; display: none;
        }
        #center-reticle {
            position: absolute; top: 50%; left: 50%;
            width: 4px; height: 4px; background: #fff;
            transform: translate(-50%, -50%); border-radius: 50%; opacity: 0.5;
        }
        
        /* Menu & Tutorial */
        #menu-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            pointer-events: auto; z-index: 10;
        }
        .hidden { display: none !important; }
        
        h1 { color: #ccc; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 2px; }
        
        /* Estilo do Tutorial */
        #tutorial-box {
            border: 1px solid #444; background: #111; padding: 15px; margin: 15px;
            width: 400px; font-size: 12px; color: #aaa; line-height: 1.6;
        }
        #tutorial-box strong { color: #fff; }
        .tut-icon { font-size: 16px; vertical-align: middle; margin-right: 5px; }

        .control-group { margin: 8px 0; color: #ddd; text-align: center; }
        input[type=range] { width: 200px; cursor: pointer; }
        input[type=number] { padding: 5px; width: 60px; text-align: center; background: #222; border: 1px solid #444; color: #fff; }
        
        /* Bot√µes */
        .btn-container { display: flex; gap: 10px; margin-top: 20px; }
        button {
            padding: 15px 30px; background: #224; color: #fff; border: 1px solid #446;
            cursor: pointer; font-family: inherit; text-transform: uppercase; font-weight: bold;
            transition: 0.2s;
        }
        button:hover { background: #336; }
        button.secondary { background: #333; border-color: #555; }
        button.secondary:hover { background: #444; }

        #hammer-ui {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;  /* Largura fixa */
            height: 60px; /* Altura fixa */
            
            /* Centraliza o conte√∫do (√≠cone ou n√∫mero) */
            display: flex;
            justify-content: center;
            align-items: center;
            
            border-radius: 12px; /* Bordas arredondadas */
            font-family: sans-serif;
            font-weight: bold;
            font-size: 24px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            
            /* Evita sele√ß√£o de texto */
            user-select: none; 
        }

        /* ESTADO 1: PRONTA (Amarelo) */
        #hammer-ui.ready {
            background-color: #f1c40f; /* Amarelo vibrante */
            color: #2c3e50; /* Texto/√çcone escuro para contraste */
            border: 2px solid #f39c12; /* Borda levemente mais escura */
            cursor: pointer;
            transform: scale(1.0);
        }

        /* ESTADO 2: COOLDOWN (Cinza ou Vermelho) */
        #hammer-ui.cooldown {
            background-color: #34495e; /* Escuro */
            color: #ecf0f1; /* Texto claro */
            border: 2px solid #2c3e50;
            opacity: 0.8;
            font-size: 20px; /* N√∫mero um pouco menor */
        }
    </style>
</head>
<body>
    <div id="ui-layer">
        <div id="hammer-ui" class="ready">
            <div id="hammer-icon">üî®</div>
            <div id="hammer-timer">PRONTA</div>
        </div>
        <div id="minimap-container"><canvas id="minimap-canvas"></canvas></div>
        <div id="stamina-container"><div id="stamina-bar"></div></div>
        <div id="interaction-msg">[E] Pegar Orbe</div>
        <div id="inventory-container">
            <div class="inv-slot" id="slot-1"><span class="inv-key">1</span></div>
            <div class="inv-slot" id="slot-2"><span class="inv-key">2</span></div>
            <div class="inv-slot" id="slot-3"><span class="inv-key">3</span></div>
        </div>
        <div id="center-reticle"></div>
    </div>

    <div id="menu-overlay">
        <h1>Labirinto Modular</h1>
        
        <div id="tutorial-box">
            <strong>COMO JOGAR:</strong><br>
            üéÆ [W,A,S,D] Mover | [SHIFT] Correr | [Mouse] Olhar<br><br>
            <strong>ITENS:</strong><br>
            üîµ <span class="tut-icon">Orbe de Energia:</span> Encontrado em becos sem sa√≠da. <br>
            Use <strong>[E]</strong> para pegar e guarde no invent√°rio.<br>
            Pressione <strong>[1, 2 ou 3]</strong> para consumir e recuperar toda a Stamina instantaneamente.<br><br>
            üü© <span class="tut-icon">Luz Verde:</span> Sa√≠da do labirinto. Seu objetivo.
        </div>
        
        <div class="control-group">
            <label>Tamanho do Mapa (√çmpar)</label><br>
            <input type="number" id="maze-size-input" min="9" max="101" step="2" value="21">
        </div>
        <div class="control-group">
            <label>Sensibilidade Mouse</label><br>
            <input 
                type="range" 
                id="sensitivity" 
                min="0.0005" 
                max="0.005"  step="0.0001" 
                value="0.002"
            >
        </div>

        <div class="btn-container">
            <button id="btn-resume" class="hidden">Continuar</button> 
            <button id="btn-restart" class="secondary">Novo Jogo</button>
        </div>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>
    <script type="module" src="./js/main.js"></script>
</body>
</html>